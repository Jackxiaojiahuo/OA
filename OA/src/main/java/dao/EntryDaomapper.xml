<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.EntryDao">
<resultMap type="Entry" id="rm">
	<id property="et_id" column="et_id"/>
	<result property="et_theme" column="et_theme"/>
	<result property="et_priority" column="et_priority"/>
	<result property="et_shopdate" column="et_shopdate"/>
	<result property="emp_id" column="emp_id"/>
	<result property="et_joindate" column="et_joindate"/>
	<result property="et_post" column="et_post"/>
	<result property="et_birth" column="et_birth"/>
	<result property="et_sex" column="et_sex"/>
	<result property="et_life" column="et_life"/>
	<result property="et_remarks" column="et_remarks"/>
	<result property="depart_id" column="depart_id"/>
	<association property="dept" column="depart_id"
	javaType="Department" select="getAllDepartmentById">
	</association>
	<association property="em" column="emp_id"
	javaType="Employee" select="getAllEmployeeById">
	</association>
</resultMap> 
	<select id="getAllEmployeeById" resultType="Employee">
		select * from
		employee where emp_id=#{emp_id}
	</select>
<select id="getAllDepartmentById" resultType="Department">
		select * from
		department where depart_id=#{depart_id}
	</select>
	<select id="findAllEntry" resultMap="rm" parameterType="map">
		select * from entry limit #{index},#{size}
	</select>
	<select id="findAllEntry_count" resultType="Integer" parameterType="map">
		select count(*) from entry
	</select>
	<select id="findEntryById" parameterType="int" resultMap="rm">
		select * from entry where et_id=#{et_id}
	</select>
	<insert id="addEntry">
		insert into entry(et_theme,et_priority,et_shopdate,emp_id,
		et_joindate,et_post,et_birth,et_sex,et_life,et_remarks,depart_id) values(#{et_theme},#{et_priority},#{et_shopdate},
		#{emp_id},#{et_joindate},#{et_post},#{et_birth},#{et_sex},#{et_life},#{et_remarks},#{depart_id})
	</insert>
</mapper>
